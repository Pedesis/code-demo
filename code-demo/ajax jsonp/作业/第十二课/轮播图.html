<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .wrap {

            position: relative;
        }

        .content .slide-img {
            display: none;
        }

        .content .slide-img.active {
            display: block;
        }

        .slide-indicators {
            position: absolute;
            left: 50%;
            bottom: 50px;
            transform: translateX(-50%);
        }

        .slide-indicators .slide-indi {
            background: red;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            float: left;
            margin-left: 10px;
        }

        .slide-indicators .slide-indi.gua-white {
            background: white;
        }
    </style>
    <script src="kitbox.js"></script>
</head>

<body>
    <div class="wrap">
        <div class="content" data-imgs=3 data-active=0>
            <div id="id-imgchange-0" class="slide-img active"><img src="slideimages/1.jpg" alt=""></div>
            <div id="id-imgchange-1" class="slide-img"><img src="slideimages/2.jpg" alt=""></div>
            <div id="id-imgchange-2" class="slide-img"><img src="slideimages/3.jpg" alt=""></div>
        </div>
        <button class="slide-left">上一页</button>
        <button class="slide-right">下一页</button>
        <div class="slide-indicators">
            <div class="slide-indi gua-white" data-active=0></div>
            <div class="slide-indi" data-active=1></div>
            <div class="slide-indi" data-active=2></div>
        </div>
    </div>
</body>
<script>
    var changeImg = function () {
        var slideRight = findElement(".wrap .slide-right");
        var slideLeft = findElement(".wrap .slide-left");
        var slideImg = findElements(".wrap .slide-img");
        var slideDot = findElement(".slide-indicators");
        var content = findElement(".content");
        var num = 0;
        bindEvent(slideRight, "click", function () {
            var numberOfImgs = parseInt(content.dataset.imgs);
            var activeIndex = parseInt(content.dataset.active);
            var nextIndex = (activeIndex + 1) % numberOfImgs;
            log("nextIndex", nextIndex);
            content.dataset.active = nextIndex;
            var nextSelector = "#id-imgchange-" + String(nextIndex);
            var className = "active";
            removeClassAll(className);
            var img = findElement(nextSelector);
            img.classList.add(className);

        })

        bindEvent(slideLeft, "click", function () {
            var numberOfImgs = parseInt(content.dataset.imgs);
            var activeIndex = parseInt(content.dataset.active);
            var prevIndex = (activeIndex + numberOfImgs - 1) % numberOfImgs;
            log("prevIndex", prevIndex);
            content.dataset.active = prevIndex;
            var prevSelector = "#id-imgchange-" + String(prevIndex);
            var className = "active";
            removeClassAll(className);
            var img = findElement(prevSelector);
            img.classList.add(className);

        })
        var timer = null;
        var move = function () {

            timer = setInterval(function () {
                var numberOfImgs = parseInt(content.dataset.imgs);
                var activeIndex = parseInt(content.dataset.active);
                var nextIndex = (activeIndex + 1) % numberOfImgs;
                log("nextIndex", nextIndex);
                content.dataset.active = nextIndex;
                var nextSelector = "#id-imgchange-" + String(nextIndex);
                var className = "active";
                removeClassAll(className);
                var img = findElement(nextSelector);
                img.classList.add(className);
                //圆点颜色同步
                num = nextIndex;
                removeClassAll("gua-white");
                slideDot.children[num].classList.add("gua-white");
            }, 1000)
        }
        move();
        bindEvent(slideDot, "click", function (e) {
            clearInterval(timer);
            e = e || event;
            log(e.target);
            if (e.target.classList.contains("slide-indi")) {
                // var numberOfImgs=parseInt(content.dataset.imgs);
                //var activeIndex=parseInt(content.dataset.active);
                removeClassAll("gua-white");
                e.target.classList.add("gua-white");
                var nextIndex = parseInt(e.target.dataset.active);
                log("nextIndex", nextIndex, this);
                content.dataset.active = nextIndex;
                var nextSelector = "#id-imgchange-" + String(nextIndex);
                var className = "active";
                removeClassAll(className);
                var img = findElement(nextSelector);
                img.classList.add(className);
            }
            move();
        })
    }
    changeImg()

</script>

</html>